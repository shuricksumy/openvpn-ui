<!-- views/modal.tpl -->

<!-- Initialize the plugin: -->
<script type="text/javascript">
    $(document).ready(function() {
        $('#route_list_selected').multiselect({
            buttonWidth: '160px',
            includeSelectAllOption: true,
            // enableFiltering: true,
            //selectedClass: "active multiselect-active-item-fallback",
        });

        var cb = $('#is_router').is(':checked');
        $('#router_subnet').prop('disabled', !cb);
        $('#router_mask').prop('disabled', !cb);

        $('#is_router').on('click',function() {
            var cb = $('#is_router').is(':checked');
            $('#router_subnet').prop('disabled', !cb);
            $('#router_mask').prop('disabled', !cb);
        });
    });
    // $(document).ready(function() {
    //     $('#is_route_default').multiselect();
    // });
    // $(document).ready(function() {
    //     $('#is_router').multiselect();
    // });
</script>

<div class="modal fade" id="editClientDetailsModal" role="dialog">
    <div class="modal-dialog custom-modal-dialog-form"> <!-- Apply custom CSS style for the modal width -->
        <div class="modal-content box box-primary">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit config for user<font color="#dd4b39" face="Verdana" size="+1"><strong> {{.ClientName}} </strong></font></h4>
            </div>
            <div class="modal-body">
                <form id="editForm" action="/clients/save_details_data" method="post">
                    
                    <!-- Hidden fields for proper form usage -->
                    <input type="hidden" name="client_name" id="client_name" value="{{.ClientName}}">
                    <input name="csrftoken" value="{{.CSRFToken}}" type="hidden">


                    <div class="panel-body">
                        <div class="form-row">
                            <div class="col-sm-4">
                                <div class="form-check">
                                    <input name="is_route_default" id="is_route_default" class="form-check-input" type="checkbox" value="true" 
                                        {{if .IsRouteDefault}} checked {{else}} {{end}}>
                                    <label class="form-check-label" for="is_route_default">
                                        Use as default route
                                    </label>
                                </div>
                            </div>
                            
                            <div class="col-sm-4">
                                <label class="form-check-label" for="static_ip">Static IP:</label>
                                <input class="form-control" name="static_ip" value="{{.StaticIP}}" pattern="((^|\.)((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]?\d))){4}$" 
                                    placeholder="Enter Static IP">
                            </div>

                            <div class="col-sm-4">
                                <label class="form-check-label" for="route_list_selected">Routes:</label>
                                <select class="form-control" name="route_list_selected" id="route_list_selected" multiple="multiple">
                                    {{range  $val := .RouteListSelected}}
                                        <option value="{{ $val }}" selected="selected">{{ $val }}</option>
                                    {{end}}
                                    {{range  $val := .RouteListUnselected}}
                                        <option value="{{ $val }}">{{ $val }}</option>
                                    {{end}}
                                </select>
                            </div>
                        </div>    
                    </div>

                    <div class="panel-body">
                        <div class="form-row">
                            <div class="col-sm-4">
                                <div class="form-check">
                                    <input name="is_router" id="is_router" class="form-check-input" type="checkbox" value="true" 
                                        {{if .IsRouter}} checked {{else}} {{end}}>
                                    <label class="form-check-label" for="is_router">
                                        Device is router
                                    </label>
                                </div>
                            </div>

                            <div class="col-sm-4">
                                <label class="form-check-label" for="router_subnet">Subnet:</label>
                                <input class="form-control" id="router_subnet" name="router_subnet" value="{{.RouterSubnet}}" pattern="((^|\.)((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]?\d))){4}$" 
                                placeholder="Enter Subnet: x.x.x.x">

                                <!-- <label class="form-check-label" for="router_mask">Mask:</label> -->
                                <input class="form-control" id="router_mask" name="router_mask" value="{{.RouterMask}}" pattern="((^|\.)((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]?\d))){4}$" 
                                placeholder="Enter Subnet Mask: x.x.x.x">
                            </div>

                            <div class="col-sm-4"></div>

                        </div>
                    </div>

                    <div class="panel-body">
                        <div class="col-sm-12">
                                <label class="form-check-label" for="description">Description:</label>
                                <input class="form-control" id="description" name="description" 
                                placeholder="Add some important notes here" value="{{.Description}}">
                        </div>
                    </div>
                       

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default btn80" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary bg-light-blue-gradient btn80">Save</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>